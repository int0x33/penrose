canvas {
   scalar width  = 533.
   scalar height = 300.
}

Global {

   shape bbox = Rectangle {
      center: (0.,0.)
      w: canvas.width
      h: canvas.height
      color: rgba( .8,.95,.9,1. )
      strokeColor: rgba(0.,0.,0.,1.)
      strokeWidth: 2.
   }

   -- Make some fun-looking text by
   -- layering it on top of a couple
   -- stroked copies

   string titleString = "Hello, Penrose!"
   vec2 titleCenter = (0.,0.)

   shape titleText = PlainText {
      string: titleString
      center: titleCenter
      w: 300.
      h: 0.
      color: rgba(1.,1.,1.,1.)
      fontFamily: "Palatino"
      fontStyle: "italic"
      fontSize: "38pt"
   }
   shape innerStroke = PlainText {
      string: titleString
      center: titleCenter
      w: 300.
      h: 0.
      color: rgba(0.,0.,0.,1.)
      fontFamily: "Palatino"
      fontStyle: "italic"
      fontSize: "38pt"
      style: "stroke:#FF0303;stroke-width:4;stroke-miterlimit:2;"
   }
   shape outerStroke = PlainText {
      string: titleString
      center: titleCenter
      w: 300.
      h: 0.
      color: rgba(0.,0.,0.,1.)
      fontFamily: "Palatino"
      fontStyle: "italic"
      fontSize: "38pt"
      style: "stroke:#FF6603;stroke-width:8;stroke-miterlimit:2;"
   }

   -- make sure the text and strokes
   -- appear in the right order
   layer titleText above innerStroke
   layer innerStroke above outerStroke
   layer outerStroke above Global.bbox
}

-- draw each point as a circular disk,
-- whose size is allowed to vary
forall Point p {
   shape p.icon = Circle {
      center: (?,?)
      r: ?
      color: rgba(0.,0.,1.,.15)
   }
   layer p.icon above Global.bbox

   ensure inRange( p.icon.r, 30., 60. )

   -- keep all disks on the canvas
   ensure contains( Global.bbox, p.icon )
}

-- repel all pairs of points
forall Point p; Point q {
   vec2 x = p.icon.center
   vec2 y = q.icon.center
   encourage equal( 200000./normsq(x-y), 0. )
}

